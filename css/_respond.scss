
@media screen and (max-width: 1200px) {
	#page { width: 1140px - ( 150px + 60px ) }
	#primary { width: 780px - ( 150px + 60px ) }

	/* Restore image margin behavior */
	.entry-content {
		img.size-full,
		img.size-large {
			max-width: 100%;
			&.alignnone {
				margin-left: 0;
			}
		}

		iframe {
			max-width: 100%;
			margin-left: 0;
		}

		.wp-caption.alignnone img.size-full + .wp-caption-text,
		.wp-caption.alignnone img.size-full,
		.wp-caption.alignnone img.size-large + .wp-caption-text,
		.wp-caption.alignnone img.size-large {
			margin-left: 0;
		}
	}
}

@media screen and (max-width: 992px) {
	#page { width: 1140px - ( 150px + 60px ) - 360px; }
	#primary { width: 100%; }
	#secondary { width: 100%; }

	/* Mobile Menu */
	#semicolon-navigation ul {
		display: none;
	}

	.menu-toggle {
		display: block;
		font-family: $font-regular;
		font-size: 16px;
		line-height: 52px;
		height: 60px;
		font-weight: 400;
		border-top: solid 4px transparent;

		margin: 0;
		padding: 0;

		&:before {
			display: inline-block;
			font-weight: normal;
			font-family: Genericons;
			content: '\f419';
			font-size: 16px;
			line-height: 52px;
			padding-right: 10px;
			-webkit-font-smoothing: antialiased;
			vertical-align: top;
		}
	}

	.main-navigation.toggled {
		.current_page_item,
		.current-menu-item,
		.current-post-ancestor,
		.current-menu-ancestor,
		.current-menu-parent,
		.current-post-parent {
			a {
				border-top-color: transparent;
				background: rgba( $color-secondary, 0.03 );
			}
		}

		#semicolon-navigation ul {
			display: block;
			border-bottom: solid 1px rgba( $color-secondary, 0.1 );
			margin-bottom: 47px;

			li {
				display: block;
				float: none;
				clear: left;

				a {
					padding: 0 26px;
					margin-top: 0;
				}
			}
		}

		.menu-toggle {
			border-top-color: $color-secondary;
			border-bottom: solid 1px rgba( $color-secondary, 0.1 );
		}
	}

	#semicolon-social {
		position: absolute;
		top: 0;
		right: 0;

		li a {
			line-height: 60px;
		}
	}
}

@media screen and (max-width: 680px) {
	#page { width: 1140px - ( 150px + 60px ) * 2 - 360px; }
	#primary { width: 100%; }

	h1 { font-size: 24px; line-height: 36px; }
	h2 { font-size: 18px; line-height: 24px; }
	h3 { font-size: 16px; line-height: 24px; }

	.site-title { font-size: 24px; line-height: 36px; }
	.grid article,
	.related-content article {
		.entry-title {
			font-size: 16px;
			line-height: 24px;
		}
	}

	.js.grid article.semicolon-featured {
		.entry-title {
			font-size: 24px;
			line-height: 36px;
		}
	}
}

@media screen and (max-width: 479px) {
	body { padding: 0 20px; }
	#page { width: 100%; min-width: 280px; }
	.site-header { margin-top: 24px; }

	.grid article,
	.related-content article {
		width: 100%;
		margin-right: 0;

		.post-thumbnail {
			width: 72px;
			height: 72px;
			position: absolute;
			margin-left: -90px;

			span { margin-left: -1 * ( ( 1000px - 72px ) / 2 ); }
		}

		.entry-header {
			padding-left: 90px;
			min-height: 72px;
		}

		.entry-title {
			width: 100% !important;
		}
	}

	.grid article.semicolon-featured {
		width: 100% !important;

		.entry-header {
			padding: 0;
			min-height: auto;
		}

		.post-thumbnail {
			margin-left: 0;
			position: static;

			width: 100% !important;
			height: 210px !important;
			max-width: 360px !important;

			span { margin-left: -1 * ( ( 1000px - 360px ) / 2 ); }
		}
	}
}

/* No-js grid compatibility */
@mixin grid-compat($columns) {
	body.no-js {
		&.grid article:nth-child(4n+0),
		.related-content article:nth-child(4n+1) {
			@if $debug { background: none; }
			margin-right: 60px;
		}

		&.grid article:nth-child(4n+0) + article,
		.related-content article:nth-child(4n+1) + article {
			@if $debug { background: none; }
			clear: none;
		}

		&.grid article:nth-child(#{$columns}n+0),
		.related-content article:nth-child(#{$columns}n+1) {
			@if $debug { background: red !important; }
			margin-right: 0 !important;
		}

		&.grid article:nth-child(#{$columns}n+0) + article,
		.related-content article:nth-child(#{$columns}n+1) + article {
			@if $debug { background: blue; }
			clear: left !important;
		}
	}
}

@media screen and (max-width: 1200px) and (min-width: 681px) {
	@include grid-compat(3);
}

@media screen and (max-width: 680px) {
	@include grid-compat(2);
}